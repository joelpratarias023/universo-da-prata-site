<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Painel do Administrador - Universo da Prata</title>
  <link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="admin.css" />
  <link rel="stylesheet" href="cards/cards.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="../scripts/notifications.js"></script>
  <script>
    // Tratamento de erros cross-browser (funciona em Chrome, Firefox, Safari, Edge, etc)
    if (typeof chrome !== 'undefined' && chrome.runtime && chrome.runtime.onMessage) {
      try {
        chrome.runtime.onMessage.addListener((request, sender, sendResponse) => {
          return false;
        });
      } catch (e) {
        // Silenciosamente ignorar erros espec√≠ficos do navegador
      }
    }
    
    // Suprimir erros de async listener - funciona em todos os navegadores
    window.addEventListener('unhandledrejection', (event) => {
      if (event.reason && event.reason.message && event.reason.message.includes('listener indicated an asynchronous response')) {
        event.preventDefault();
      }
    });
  </script>
</head>
<body>

  <!-- Menu fixo igual ao site -->
  <header class="topo-fixo" id="menu-fixo">
    <div class="menu-container">
      <div class="logo-titulo">
        <a href="../index.html">
          <img src="../logo.png" alt="Logo" class="logo-site" />
        </a>
        <div class="titulos">
          <h1>UNIVERSO DA PRATA</h1>
          <h2 class="submarca">Admin Panel</h2>
        </div>
      </div>
      
      <div class="menu-direita mobile-apenas">
        <button class="menu-hamburguer" onclick="toggleMenuAdmin()">‚ò∞</button>
      </div>

      <nav class="menu-navegacao mobile-escondido" id="menu-admin">
        <a href="#dashboard" onclick="mostrarSecao('dashboard')">Dashboard</a>
        <a href="#fornecedores" onclick="mostrarSecao('fornecedores')">Fornecedores</a>
        <a href="#produtos" onclick="mostrarSecao('produtos')">Produtos</a>
        <a href="#produtos-pendentes" onclick="mostrarSecao('produtos-pendentes')">Aprovar Produtos</a>
        <a href="#entregadores" onclick="mostrarSecao('entregadores')">Entregadores</a>
        <a href="#entregas" onclick="mostrarSecao('entregas')">Entregas</a>
        <a href="#pedidos" onclick="mostrarSecao('pedidos')">Pedidos</a>
        <a href="#pagamentos" onclick="mostrarSecao('pagamentos')">Pagamentos</a>
        <a href="#clientes" onclick="mostrarSecao('clientes')">Clientes</a>
        <a href="#relatorios" onclick="mostrarSecao('relatorios')">Relat√≥rios</a>
        <a href="#configuracoes" onclick="mostrarSecao('configuracoes')">Configura√ß√µes</a>
        <a href="../index.html" style="color: #ffd700; margin-top: 20px;">‚Üê Voltar ao Site</a>
      </nav>
    </div>
  </header>


  <!-- Container principal -->
  <main class="admin-container">

    <!-- DASHBOARD -->
    <section id="dashboard" class="admin-secao ativa">
      <h2>Dashboard</h2>
      <div class="stats-grid">
        <div class="stat-card" onclick="mostrarSecao('fornecedores')" style="cursor: pointer;">
          <div class="stat-icon">üë•</div>
          <h3>Fornecedores</h3>
          <p class="stat-numero" id="total-fornecedores">0</p>
        </div>
        <div class="stat-card" onclick="mostrarSecao('produtos-pendentes')" style="cursor: pointer; border: 2px solid #ffd700;">
          <div class="stat-icon">‚è≥</div>
          <h3>Produtos Pendentes</h3>
          <p class="stat-numero" id="produtos-pendentes">0</p>
        </div>
        <div class="stat-card" onclick="abrirCardProdutos()" style="cursor: pointer;">
          <div class="stat-icon">üì¶</div>
          <h3>Total de Produtos</h3>
          <p class="stat-numero" id="total-produtos">0</p>
        </div>
        <div class="stat-card" onclick="mostrarSecao('entregas')" style="cursor: pointer; border: 2px solid #ffd700;">
          <div class="stat-icon">‚úÖ</div>
          <h3>Entregas p/ Aprovar</h3>
          <p class="stat-numero" id="entregas-pendentes">0</p>
        </div>
        <div class="stat-card" onclick="abrirCardEntregadores()" style="cursor: pointer;">
          <div class="stat-icon">üöö</div>
          <h3>Entregadores</h3>
          <p class="stat-numero" id="total-entregadores">0</p>
        </div>
        <div class="stat-card" onclick="mostrarSecao('pagamentos')" style="cursor: pointer; border: 2px solid #ffd700;">
          <div class="stat-icon">üí∞</div>
          <h3>Pagamentos Pendentes</h3>
          <p class="stat-numero" id="pagamentos-pendentes">0</p>
        </div>
        <div class="stat-card" onclick="abrirCardPedidos()" style="cursor: pointer;">
          <div class="stat-icon">üõçÔ∏è</div>
          <h3>Pedidos Ativos</h3>
          <p class="stat-numero" id="pedidos-ativos">0</p>
        </div>
        <div class="stat-card" onclick="abrirCardVendas()" style="cursor: pointer;">
          <div class="stat-icon">üíµ</div>
          <h3>Vendas Hoje</h3>
          <p class="stat-numero" id="vendas-hoje">0 AKZ</p>
        </div>
      </div>

      <h3 style="margin-top: 40px;">A√ß√µes R√°pidas</h3>
      <div class="acoes-rapidas">
        <button class="btn-acao" onclick="mostrarSecao('produtos-pendentes')" style="background: #ffd700; color: #000;">
          <i class="fas fa-check-circle"></i> Aprovar Produtos
        </button>
        <button class="btn-acao" onclick="abrirModalCriarEntrega()" style="background: #ffd700; color: #000;">
          <i class="fas fa-truck"></i> Criar Entrega
        </button>
        <button class="btn-acao" onclick="mostrarSecao('pagamentos')" style="background: #ffd700; color: #000;">
          <i class="fas fa-money-bill"></i> Processar Pagamentos
        </button>
        <button class="btn-acao" onclick="mostrarSecao('fornecedores')">
          <i class="fas fa-users"></i> Gerir Fornecedores
        </button>
        <button class="btn-acao" onclick="mostrarSecao('entregadores')">
          <i class="fas fa-user-plus"></i> Gerir Entregadores
        </button>
        <button class="btn-acao" onclick="mostrarSecao('pedidos')">
          <i class="fas fa-list-check"></i> Ver Pedidos
        </button>
      </div>
    </section>

    <!-- FORNECEDORES -->
    <section id="fornecedores" class="admin-secao">
      <h2>Gest√£o de Fornecedores</h2>
      
      <button class="btn-primario" onclick="abrirModalNovoFornecedor()">
        <i class="fas fa-user-plus"></i> Adicionar Fornecedor
      </button>

      <div class="filtros-tabela">
        <input type="text" id="filtro-fornecedores" placeholder="üîç Buscar fornecedor..." onkeyup="filtrarFornecedores()">
        <select id="filtro-status-fornecedor" onchange="filtrarFornecedores()">
          <option value="">Todos os status</option>
          <option value="ativo">Ativo</option>
          <option value="suspenso">Suspenso</option>
          <option value="bloqueado">Bloqueado</option>
        </select>
      </div>

      <table class="tabela-admin">
        <thead>
          <tr>
            <th>ID</th>
            <th>Nome</th>
            <th>Email</th>
            <th>Telefone</th>
            <th>Produtos</th>
            <th>Total Vendas</th>
            <th>Comiss√£o</th>
            <th>Status</th>
            <th>A√ß√µes</th>
          </tr>
        </thead>
        <tbody id="lista-fornecedores">
          <tr><td colspan="9" style="text-align: center; padding: 20px;">Carregando fornecedores...</td></tr>
        </tbody>
      </table>
    </section>

    <!-- PRODUTOS -->
    <section id="produtos" class="admin-secao">
      <h2>Gerenciamento de Produtos</h2>
      
      <button class="btn-primario" id="novo-produto-btn" onclick="abrirModalProduto()">
        <i class="fas fa-plus"></i> Adicionar Novo Produto
      </button>

      <div class="filtros-tabela">
        <input type="text" id="filtro-produtos" placeholder="üîç Buscar produto..." onkeyup="filtrarProdutos()">
        <select id="filtro-categoria" onchange="filtrarProdutos()">
          <option value="">Todas as categorias</option>
          <option value="an√©is">An√©is</option>
          <option value="colares">Colar</option>
          <option value="pulseiras">Pulseiras</option>
          <option value="pingentes">Pingentes</option>
          <option value="brincos">Brincos</option>
        </select>
      </div>

      <table class="tabela-admin">
        <thead>
          <tr>
            <th>ID</th>
            <th>Nome</th>
            <th>Categoria</th>
            <th>Pre√ßo</th>
            <th>Estoque</th>
            <th>Imagem</th>
            <th>A√ß√µes</th>
          </tr>
        </thead>
        <tbody id="lista-produtos">
          <tr><td colspan="7" style="text-align: center; padding: 20px;">Nenhum produto adicionado ainda</td></tr>
        </tbody>
      </table>
    </section>

    <!-- PRODUTOS PENDENTES DE APROVA√á√ÉO -->
    <section id="produtos-pendentes" class="admin-secao">
      <h2>‚è≥ Produtos Pendentes de Aprova√ß√£o</h2>
      
      <div class="alert-info" style="margin-bottom: 20px; padding: 15px; background: rgba(255, 215, 0, 0.1); border-left: 4px solid #ffd700; border-radius: 8px;">
        <i class="fas fa-info-circle"></i> <strong>Aten√ß√£o:</strong> Estes produtos foram enviados pelos fornecedores e aguardam sua aprova√ß√£o para ficarem vis√≠veis no site.
      </div>

      <div class="filtros-tabela">
        <input type="text" id="filtro-produtos-pendentes" placeholder="üîç Buscar produto..." onkeyup="filtrarProdutosPendentes()">
        <select id="filtro-fornecedor-pendente" onchange="filtrarProdutosPendentes()">
          <option value="">Todos os fornecedores</option>
        </select>
      </div>

      <table class="tabela-admin">
        <thead>
          <tr>
            <th>Imagem</th>
            <th>Nome</th>
            <th>Fornecedor</th>
            <th>Categoria</th>
            <th>Pre√ßo</th>
            <th>Estoque</th>
            <th>Comiss√£o (%)</th>
            <th>Data Envio</th>
            <th>A√ß√µes</th>
          </tr>
        </thead>
        <tbody id="lista-produtos-pendentes">
          <tr><td colspan="9" style="text-align: center; padding: 20px;">Nenhum produto pendente</td></tr>
        </tbody>
      </table>
    </section>

    <!-- ENTREGADORES -->
    <section id="entregadores" class="admin-secao">
      <h2>Gerenciamento de Entregadores</h2>
      
      <button class="btn-primario" id="novo-entregador-btn" onclick="abrirModalEntregador()">
        <i class="fas fa-user-plus"></i> Adicionar Entregador
      </button>

      <div class="filtros-tabela">
        <input type="text" id="filtro-entregadores" placeholder="üîç Buscar entregador..." onkeyup="filtrarEntregadores()">
        <select id="filtro-status" onchange="filtrarEntregadores()">
          <option value="">Todos os status</option>
          <option value="ativo">Ativo</option>
          <option value="inativo">Inativo</option>
          <option value="em-entrega">Em Entrega</option>
        </select>
      </div>

      <table class="tabela-admin">
        <thead>
          <tr>
            <th>ID</th>
            <th>Nome</th>
            <th>Telefone</th>
            <th>Zona de Entrega</th>
            <th>Status</th>
            <th>Entregas</th>
            <th>A√ß√µes</th>
          </tr>
        </thead>
        <tbody id="lista-entregadores">
          <tr><td colspan="7" style="text-align: center; padding: 20px;">Nenhum entregador adicionado ainda</td></tr>
        </tbody>
      </table>
    </section>

    <!-- ENTREGAS -->
    <section id="entregas" class="admin-secao">
      <h2>Gest√£o de Entregas</h2>
      
      <button class="btn-primario" onclick="abrirModalCriarEntrega()">
        <i class="fas fa-plus"></i> Criar Nova Entrega
      </button>

      <div class="filtros-tabela">
        <input type="text" id="filtro-entregas" placeholder="üîç Buscar entrega..." onkeyup="filtrarEntregas()">
        <select id="filtro-status-entrega" onchange="filtrarEntregas()">
          <option value="">Todos os status</option>
          <option value="aguardando_recolha">Aguardando Recolha</option>
          <option value="em_transito">Em Tr√¢nsito</option>
          <option value="concluida">Conclu√≠da (Aguardando Aprova√ß√£o)</option>
          <option value="aprovada">Aprovada</option>
          <option value="rejeitada">Rejeitada</option>
        </select>
      </div>

      <div class="alert-warning" style="margin: 20px 0; padding: 15px; background: rgba(255, 215, 0, 0.1); border-left: 4px solid #ffd700; border-radius: 8px;">
        <i class="fas fa-exclamation-triangle"></i> <strong>Entregas Aguardando Aprova√ß√£o:</strong> <span id="entregas-aguardando">0</span>
      </div>

      <table class="tabela-admin">
        <thead>
          <tr>
            <th>ID</th>
            <th>Pedido</th>
            <th>Cliente</th>
            <th>Entregador</th>
            <th>Endere√ßo</th>
            <th>Comiss√£o</th>
            <th>Status</th>
            <th>Data</th>
            <th>A√ß√µes</th>
          </tr>
        </thead>
        <tbody id="lista-entregas">
          <tr><td colspan="9" style="text-align: center; padding: 20px;">Carregando entregas...</td></tr>
        </tbody>
      </table>
    </section>

    <!-- PEDIDOS -->
    <section id="pedidos" class="admin-secao">
      <h2>Gerenciamento de Pedidos</h2>
      
      <div class="filtros-tabela">
        <input type="text" id="filtro-pedidos" placeholder="üîç Buscar pedido..." onkeyup="filtrarPedidos()">
        <select id="filtro-status-pedido" onchange="filtrarPedidos()">
          <option value="">Todos os status</option>
          <option value="pendente">Pendente</option>
          <option value="confirmado">Confirmado</option>
          <option value="em-entrega">Em Entrega</option>
          <option value="entregue">Entregue</option>
          <option value="cancelado">Cancelado</option>
        </select>
      </div>

      <table class="tabela-admin">
        <thead>
          <tr>
            <th>ID Pedido</th>
            <th>Cliente</th>
            <th>Valor Total</th>
            <th>Data</th>
            <th>Entregador</th>
            <th>Status</th>
            <th>A√ß√µes</th>
          </tr>
        </thead>
        <tbody id="lista-pedidos">
          <tr><td colspan="7" style="text-align: center; padding: 20px;">Nenhum pedido ainda</td></tr>
        </tbody>
      </table>
    </section>

    <!-- PAGAMENTOS -->
    <section id="pagamentos" class="admin-secao">
      <h2>Gest√£o de Pagamentos</h2>

      <div class="pagamentos-tabs">
        <button class="tab-btn active" onclick="mostrarTabPagamento('fornecedores')">
          <i class="fas fa-users"></i> Pagamentos Fornecedores
        </button>
        <button class="tab-btn" onclick="mostrarTabPagamento('entregadores')">
          <i class="fas fa-truck"></i> Pagamentos Entregadores
        </button>
        <button class="tab-btn" onclick="mostrarTabPagamento('relatorio')">
          <i class="fas fa-chart-bar"></i> Relat√≥rio Financeiro
        </button>
      </div>

      <!-- Tab Fornecedores -->
      <div id="tab-pagamentos-fornecedores" class="tab-content active">
        <h3>Pagamentos de Fornecedores</h3>
        
        <div style="display: flex; gap: 10px; margin: 20px 0;">
          <button class="btn-primario" onclick="abrirModalGerarPagamentoFornecedor()">
            <i class="fas fa-calculator"></i> Gerar Pagamentos por Per√≠odo
          </button>
        </div>

        <div class="filtros-tabela">
          <select id="filtro-status-pag-fornecedor" onchange="filtrarPagamentosFornecedores()">
            <option value="">Todos os status</option>
            <option value="pendente">Pendente</option>
            <option value="processado">Processado</option>
          </select>
        </div>

        <table class="tabela-admin">
          <thead>
            <tr>
              <th>ID</th>
              <th>Fornecedor</th>
              <th>Per√≠odo</th>
              <th>Valor Bruto</th>
              <th>Comiss√£o (%)</th>
              <th>Valor L√≠quido</th>
              <th>Vendas</th>
              <th>Status</th>
              <th>A√ß√µes</th>
            </tr>
          </thead>
          <tbody id="lista-pagamentos-fornecedores">
            <tr><td colspan="9" style="text-align: center; padding: 20px;">Carregando...</td></tr>
          </tbody>
        </table>
      </div>

      <!-- Tab Entregadores -->
      <div id="tab-pagamentos-entregadores" class="tab-content">
        <h3>Pagamentos de Entregadores</h3>
        
        <div style="display: flex; gap: 10px; margin: 20px 0;">
          <button class="btn-primario" onclick="abrirModalGerarPagamentoEntregador()">
            <i class="fas fa-calculator"></i> Gerar Pagamentos por Per√≠odo
          </button>
        </div>

        <div class="filtros-tabela">
          <select id="filtro-status-pag-entregador" onchange="filtrarPagamentosEntregadores()">
            <option value="">Todos os status</option>
            <option value="pendente">Pendente</option>
            <option value="processado">Processado</option>
          </select>
        </div>

        <table class="tabela-admin">
          <thead>
            <tr>
              <th>ID</th>
              <th>Entregador</th>
              <th>Per√≠odo</th>
              <th>Valor Total</th>
              <th>Entregas</th>
              <th>M√©dia/Entrega</th>
              <th>Status</th>
              <th>A√ß√µes</th>
            </tr>
          </thead>
          <tbody id="lista-pagamentos-entregadores">
            <tr><td colspan="8" style="text-align: center; padding: 20px;">Carregando...</td></tr>
          </tbody>
        </table>
      </div>

      <!-- Tab Relat√≥rio -->
      <div id="tab-relatorio-financeiro" class="tab-content">
        <h3>Relat√≥rio Financeiro</h3>
        
        <div class="filtros-tabela">
          <input type="date" id="relatorio-data-inicio" />
          <input type="date" id="relatorio-data-fim" />
          <button class="btn-primario" onclick="gerarRelatorioFinanceiro()">
            <i class="fas fa-search"></i> Gerar Relat√≥rio
          </button>
        </div>

        <div id="relatorio-financeiro-resultado" style="margin-top: 20px;">
          <!-- Resultado do relat√≥rio aqui -->
        </div>
      </div>
    </section>

    <!-- CLIENTES -->
    <section id="clientes" class="admin-secao">
      <h2>Gerenciamento de Clientes</h2>
      
      <div class="filtros-tabela">
        <input type="text" id="filtro-clientes" placeholder="üîç Buscar cliente..." onkeyup="filtrarClientes()">
      </div>

      <table class="tabela-admin">
        <thead>
          <tr>
            <th>Nome</th>
            <th>Telefone</th>
            <th>Email</th>
            <th>Endere√ßo</th>
            <th>Pedidos</th>
            <th>Gasto Total</th>
            <th>A√ß√µes</th>
          </tr>
        </thead>
        <tbody id="lista-clientes">
          <tr><td colspan="7" style="text-align: center; padding: 20px;">Nenhum cliente registrado</td></tr>
        </tbody>
      </table>
    </section>

    <!-- RELAT√ìRIOS -->
    <section id="relatorios" class="admin-secao">
      <h2>Relat√≥rios e An√°lises</h2>
      
      <div class="relatorios-grid">
        <div class="relatorio-card">
          <h3>üìä Vendas Mensais</h3>
          <canvas id="grafico-vendas"></canvas>
        </div>
        <div class="relatorio-card">
          <h3>üèÜ Produtos Mais Vendidos</h3>
          <ul id="produtos-top" style="padding: 20px; list-style: none;">
            <li>Carregando...</li>
          </ul>
        </div>
        <div class="relatorio-card">
          <h3>üöö Desempenho de Entregadores</h3>
          <ul id="entregadores-top" style="padding: 20px; list-style: none;">
            <li>Carregando...</li>
          </ul>
        </div>
        <div class="relatorio-card">
          <h3>üìà Estat√≠sticas Gerais</h3>
          <div id="stats-gerais" style="padding: 20px;">
            <p>Ticket m√©dio: <strong id="ticket-medio">0 AKZ</strong></p>
            <p>Taxa de convers√£o: <strong id="taxa-conversao">0%</strong></p>
            <p>Tempo m√©dio de entrega: <strong id="tempo-medio">0h</strong></p>
          </div>
        </div>
      </div>
    </section>

    <!-- CONFIGURA√á√ïES -->
    <section id="configuracoes" class="admin-secao">
      <h2>Configura√ß√µes do Site</h2>
      
      <div class="config-cards">
        <div class="config-card">
          <h3>üè™ Informa√ß√µes da Loja</h3>
          <form id="form-configuracoes">
            <label>Nome da Loja</label>
            <input type="text" id="nome-loja" value="Universo da Prata" placeholder="Nome da loja">
            
            <label>Telefone Principal</label>
            <input type="tel" id="telefone-principal" value="+244934803197" placeholder="Telefone">
            
            <label>Email</label>
            <input type="email" id="email-loja" value="universodaprata@gmail.com" placeholder="Email">
            
            <label>Hor√°rio de Atendimento</label>
            <input type="text" id="horario-atendimento" value="9:00 - 18:00" placeholder="Ex: 9:00 - 18:00">
            
            <button type="button" class="btn-primario" onclick="salvarConfiguracoes()">
              <i class="fas fa-save"></i> Salvar Configura√ß√µes
            </button>
          </form>
        </div>

        <div class="config-card">
          <h3>üîê Seguran√ßa</h3>
          <button class="btn-perigo" onclick="confirmarAcao('Deseja realmente limpar o cache?', 'limparCache')">
            <i class="fas fa-trash"></i> Limpar Cache
          </button>
          <button class="btn-perigo" onclick="confirmarAcao('Deseja fazer backup dos dados?', 'fazerBackup')">
            <i class="fas fa-download"></i> Fazer Backup
          </button>
          <button class="btn-perigo" onclick="confirmarAcao('Deseja restaurar dados de backup?', 'restaurarBackup')">
            <i class="fas fa-upload"></i> Restaurar Backup
          </button>
        </div>

        <div class="config-card">
          <h3>üåê Integra√ß√£o de Categorias</h3>
          <form id="form-categorias">
            <label>Adicionar Nova Categoria</label>
            <div style="display: flex; gap: 10px;">
              <input type="text" id="nome-categoria" placeholder="Nome da categoria" style="flex: 1;">
              <button type="button" class="btn-primario" onclick="adicionarCategoria()">Adicionar</button>
            </div>
          </form>
          <div id="lista-categorias" style="margin-top: 20px;">
            <!-- Categorias adicionadas aqui -->
          </div>
        </div>
      </div>
    </section>

  </main>

  <!-- CARDS MODAIS -->
  
  <!-- Modal dos Produtos -->
  <div id="modal-produtos" class="modal-card" style="display: none;">
    <div class="modal-card-conteudo">
      <button class="btn-fechar-modal" onclick="fecharModalCard('modal-produtos')">‚úï</button>
      <h2>üì¶ Gest√£o de Produtos</h2>
      
      <div class="card-filtros">
        <input type="text" id="filtro-produtos-card" placeholder="üîç Buscar produto..." onkeyup="filtrarProdutosCard()">
        <select id="filtro-categoria-card" onchange="filtrarProdutosCard()">
          <option value="">Todas as categorias</option>
          <option value="an√©is">An√©is</option>
          <option value="colares">Colares</option>
          <option value="pulseiras">Pulseiras</option>
          <option value="brincos">Brincos</option>
          <option value="pingentes">Pingentes</option>
        </select>
      </div>

      <div class="card-lista">
        <table class="tabela-card">
          <thead>
            <tr>
              <th>Nome</th>
              <th>Categoria</th>
              <th>Pre√ßo</th>
              <th>Estoque</th>
              <th>A√ß√µes</th>
            </tr>
          </thead>
          <tbody id="lista-produtos-card">
            <tr><td colspan="5" style="text-align: center; padding: 20px;">Carregando...</td></tr>
          </tbody>
        </table>
      </div>

      <div class="card-resumo">
        <h3>Resumo</h3>
        <p>Total de Produtos: <strong id="total-produtos-resumo">0</strong></p>
        <p>Valor Total em Estoque: <strong id="valor-estoque">0 AKZ</strong></p>
        <p>Produtos com Baixo Estoque: <strong id="baixo-estoque">0</strong></p>
      </div>
    </div>
  </div>

  <!-- Modal dos Entregadores -->
  <div id="modal-entregadores" class="modal-card" style="display: none;">
    <div class="modal-card-conteudo">
      <button class="btn-fechar-modal" onclick="fecharModalCard('modal-entregadores')">‚úï</button>
      <h2>üöö Gest√£o de Entregadores</h2>
      
      <div class="card-filtros">
        <input type="text" id="filtro-entregadores-card" placeholder="üîç Buscar entregador..." onkeyup="filtrarEntregadoresCard()">
        <select id="filtro-status-entregador-card" onchange="filtrarEntregadoresCard()">
          <option value="">Todos os status</option>
          <option value="ativo">Ativo</option>
          <option value="inativo">Inativo</option>
          <option value="em-entrega">Em Entrega</option>
        </select>
      </div>

      <div class="card-lista">
        <table class="tabela-card">
          <thead>
            <tr>
              <th>Nome</th>
              <th>Telefone</th>
              <th>Status</th>
              <th>Entregas</th>
              <th>A√ß√µes</th>
            </tr>
          </thead>
          <tbody id="lista-entregadores-card">
            <tr><td colspan="5" style="text-align: center; padding: 20px;">Carregando...</td></tr>
          </tbody>
        </table>
      </div>

      <div class="card-resumo">
        <h3>Resumo</h3>
        <p>Total de Entregadores: <strong id="total-entregadores-resumo">0</strong></p>
        <p>Entregadores Ativos: <strong id="entregadores-ativos">0</strong></p>
        <p>Total de Entregas: <strong id="total-entregas">0</strong></p>
      </div>
    </div>
  </div>

  <!-- Modal dos Pedidos -->
  <div id="modal-pedidos" class="modal-card" style="display: none;">
    <div class="modal-card-conteudo">
      <button class="btn-fechar-modal" onclick="fecharModalCard('modal-pedidos')">‚úï</button>
      <h2>üõçÔ∏è Gest√£o de Pedidos</h2>
      
      <div class="card-filtros">
        <input type="text" id="filtro-pedidos-card" placeholder="üîç Buscar pedido..." onkeyup="filtrarPedidosCard()">
        <select id="filtro-status-pedido-card" onchange="filtrarPedidosCard()">
          <option value="">Todos os status</option>
          <option value="pendente">Pendente</option>
          <option value="confirmado">Confirmado</option>
          <option value="em-entrega">Em Entrega</option>
          <option value="entregue">Entregue</option>
          <option value="cancelado">Cancelado</option>
        </select>
      </div>

      <div class="card-lista">
        <table class="tabela-card">
          <thead>
            <tr>
              <th>ID Pedido</th>
              <th>Cliente</th>
              <th>Valor</th>
              <th>Data</th>
              <th>Status</th>
              <th>A√ß√µes</th>
            </tr>
          </thead>
          <tbody id="lista-pedidos-card">
            <tr><td colspan="6" style="text-align: center; padding: 20px;">Carregando...</td></tr>
          </tbody>
        </table>
      </div>

      <div class="card-resumo">
        <h3>Resumo</h3>
        <p>Total de Pedidos: <strong id="total-pedidos-resumo">0</strong></p>
        <p>Valor Total: <strong id="valor-total-pedidos">0 AKZ</strong></p>
        <p>Pedidos Pendentes: <strong id="pedidos-pendentes-resumo">0</strong></p>
      </div>
    </div>
  </div>

  <!-- Modal dos Clientes -->
  <div id="modal-clientes" class="modal-card" style="display: none;">
    <div class="modal-card-conteudo">
      <button class="btn-fechar-modal" onclick="fecharModalCard('modal-clientes')">‚úï</button>
      <h2>üë• Gest√£o de Clientes</h2>
      
      <div class="card-filtros">
        <input type="text" id="filtro-clientes-card" placeholder="üîç Buscar cliente..." onkeyup="filtrarClientesCard()">
      </div>

      <div class="card-lista">
        <table class="tabela-card">
          <thead>
            <tr>
              <th>Nome</th>
              <th>Telefone</th>
              <th>Email</th>
              <th>Pedidos</th>
              <th>Gasto Total</th>
              <th>A√ß√µes</th>
            </tr>
          </thead>
          <tbody id="lista-clientes-card">
            <tr><td colspan="6" style="text-align: center; padding: 20px;">Carregando...</td></tr>
          </tbody>
        </table>
      </div>

      <div class="card-resumo">
        <h3>Resumo</h3>
        <p>Total de Clientes: <strong id="total-clientes-resumo">0</strong></p>
        <p>Gasto Total de Clientes: <strong id="gasto-total-clientes">0 AKZ</strong></p>
        <p>Ticket M√©dio: <strong id="ticket-medio-clientes">0 AKZ</strong></p>
      </div>
    </div>
  </div>

  <!-- Modal de Vendas -->
  <div id="modal-vendas" class="modal-card" style="display: none;">
    <div class="modal-card-conteudo">
      <button class="btn-fechar-modal" onclick="fecharModalCard('modal-vendas')">‚úï</button>
      <h2>üí∞ Vendas do Dia</h2>
      
      <div class="card-filtros">
        <input type="date" id="filtro-data-vendas" onchange="filtrarVendasCard()">
      </div>

      <div class="card-lista">
        <table class="tabela-card">
          <thead>
            <tr>
              <th>ID Pedido</th>
              <th>Cliente</th>
              <th>Produtos</th>
              <th>Valor</th>
              <th>Hora</th>
            </tr>
          </thead>
          <tbody id="lista-vendas-card">
            <tr><td colspan="5" style="text-align: center; padding: 20px;">Carregando...</td></tr>
          </tbody>
        </table>
      </div>

      <div class="card-resumo">
        <h3>Resumo de Vendas</h3>
        <p>Total de Vendas: <strong id="total-vendas-resumo">0</strong></p>
        <p>Valor Total: <strong id="valor-total-vendas">0 AKZ</strong></p>
        <p>Ticket M√©dio: <strong id="ticket-medio-vendas">0 AKZ</strong></p>
      </div>
    </div>
  </div>

  <!-- Modal das Avalia√ß√µes -->
  <div id="modal-avaliacoes" class="modal-card" style="display: none;">
    <div class="modal-card-conteudo">
      <button class="btn-fechar-modal" onclick="fecharModalCard('modal-avaliacoes')">‚úï</button>
      <h2>‚≠ê Avalia√ß√µes</h2>
      
      <div class="card-filtros">
        <select id="filtro-estrelas-card" onchange="filtrarAvaliacoesCard()">
          <option value="">Todas as avalia√ß√µes</option>
          <option value="5">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (5 estrelas)</option>
          <option value="4">‚≠ê‚≠ê‚≠ê‚≠ê (4 estrelas)</option>
          <option value="3">‚≠ê‚≠ê‚≠ê (3 estrelas)</option>
          <option value="2">‚≠ê‚≠ê (2 estrelas)</option>
          <option value="1">‚≠ê (1 estrela)</option>
        </select>
      </div>

      <div class="card-lista">
        <div id="lista-avaliacoes-card" style="padding: 20px;">
          <p style="text-align: center;">Carregando...</p>
        </div>
      </div>

      <div class="card-resumo">
        <h3>Resumo de Avalia√ß√µes</h3>
        <p>Total de Avalia√ß√µes: <strong id="total-avaliacoes-resumo">0</strong></p>
        <p>Avalia√ß√£o M√©dia: <strong id="media-avaliacoes">0/5</strong></p>
        <p>Avalia√ß√µes 5‚≠ê: <strong id="avaliacoes-5-resumo">0</strong></p>
      </div>
    </div>
  </div>

  <!-- MODAL PRODUTO -->
  <div id="modal-produto" class="modal">
    <div class="modal-content">
      <span class="modal-fechar" onclick="fecharModal('modal-produto')">&times;</span>
      <h2 id="titulo-modal-produto">Adicionar Novo Produto</h2>
      
      <form id="form-produto">
        <div class="form-grupo">
          <label>Nome do Produto *</label>
          <input type="text" id="produto-nome" required>
        </div>

        <div class="form-grupo">
          <label>Descri√ß√£o *</label>
          <textarea id="produto-descricao" required rows="4"></textarea>
        </div>

        <div class="form-grid">
          <div class="form-grupo">
            <label>Categoria *</label>
            <select id="produto-categoria" required>
              <option value="">Selecione</option>
              <option value="an√©is">An√©is</option>
              <option value="colares">Colar</option>
              <option value="pulseiras">Pulseiras</option>
              <option value="pingentes">Pingentes</option>
              <option value="brincos">Brincos</option>
            </select>
          </div>

          <div class="form-grupo">
            <label>Pre√ßo (AKZ) *</label>
            <input type="number" id="produto-preco" required min="0">
          </div>

          <div class="form-grupo">
            <label>Estoque *</label>
            <input type="number" id="produto-estoque" required min="0">
          </div>
        </div>

        <div class="form-grupo">
          <label>URL da Imagem *</label>
          <input type="url" id="produto-imagem" required placeholder="https://...">
          <small>Cole o URL da imagem do produto</small>
        </div>

        <div style="display: flex; gap: 10px;">
          <button type="submit" class="btn-primario">
            <i class="fas fa-save"></i> Salvar Produto
          </button>
          <button type="button" class="btn-secundario" onclick="fecharModal('modal-produto')">
            Cancelar
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- MODAL ENTREGADOR -->
  <div id="modal-entregador" class="modal">
    <div class="modal-content">
      <span class="modal-fechar" onclick="fecharModal('modal-entregador')">&times;</span>
      <h2 id="titulo-modal-entregador">Adicionar Novo Entregador</h2>
      
      <form id="form-entregador">
        <div class="form-grupo">
          <label>Nome Completo *</label>
          <input type="text" id="entregador-nome" required>
        </div>

        <div class="form-grupo">
          <label>Telefone *</label>
          <input type="tel" id="entregador-telefone" required>
        </div>

        <div class="form-grid">
          <div class="form-grupo">
            <label>Email</label>
            <input type="email" id="entregador-email">
          </div>

          <div class="form-grupo">
            <label>Status *</label>
            <select id="entregador-status" required>
              <option value="ativo">Ativo</option>
              <option value="inativo">Inativo</option>
            </select>
          </div>
        </div>

        <div class="form-grupo">
          <label>Zona de Entrega *</label>
          <input type="text" id="entregador-zona" required placeholder="Ex: Zona 1, Centro">
        </div>

        <div class="form-grupo">
          <label>Comiss√£o (%) *</label>
          <input type="number" id="entregador-comissao" required min="0" max="100" value="10">
        </div>

        <div style="display: flex; gap: 10px;">
          <button type="submit" class="btn-primario">
            <i class="fas fa-save"></i> Salvar Entregador
          </button>
          <button type="button" class="btn-secundario" onclick="fecharModal('modal-entregador')">
            Cancelar
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- MODAL DETALHES PEDIDO -->
  <div id="modal-pedido" class="modal">
    <div class="modal-content">
      <span class="modal-fechar" onclick="fecharModal('modal-pedido')">&times;</span>
      <h2>Detalhes do Pedido</h2>
      
      <div id="detalhes-pedido">
        <!-- Preenchido dinamicamente -->
      </div>

      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <select id="novo-status-pedido" style="padding: 10px; border-radius: 8px;">
          <option value="">Alterar status para:</option>
          <option value="pendente">Pendente</option>
          <option value="confirmado">Confirmado</option>
          <option value="em-entrega">Em Entrega</option>
          <option value="entregue">Entregue</option>
          <option value="cancelado">Cancelado</option>
        </select>
        <button class="btn-primario" onclick="atualizarStatusPedido()">Atualizar</button>
        <button class="btn-secundario" onclick="fecharModal('modal-pedido')">Fechar</button>
      </div>
    </div>
  </div>

  <!-- MODAL APROVAR/REJEITAR PRODUTO -->
  <div id="modal-aprovar-produto" class="modal">
    <div class="modal-content">
      <span class="modal-fechar" onclick="fecharModal('modal-aprovar-produto')">&times;</span>
      <h2 id="titulo-aprovacao-produto">Aprovar Produto</h2>
      
      <div id="produto-info-aprovacao" style="margin-bottom: 20px;">
        <!-- Info do produto -->
      </div>

      <form id="form-aprovar-produto">
        <input type="hidden" id="produto-id-aprovacao">
        
        <div class="form-grupo">
          <label>Pre√ßo Final (AKZ) *</label>
          <input type="number" id="produto-preco-aprovacao" required min="0" step="0.01">
          <small>Ajuste o pre√ßo se necess√°rio</small>
        </div>

        <div class="form-grupo">
          <label>Comiss√£o da Plataforma (%) *</label>
          <input type="number" id="produto-comissao-aprovacao" required min="0" max="100" value="15">
          <small>Comiss√£o que a plataforma receber√° sobre cada venda</small>
        </div>

        <div class="form-grupo" id="grupo-motivo-rejeicao" style="display: none;">
          <label>Motivo da Rejei√ß√£o *</label>
          <textarea id="motivo-rejeicao" rows="4" placeholder="Explique o motivo da rejei√ß√£o..."></textarea>
        </div>

        <div style="display: flex; gap: 10px;">
          <button type="button" class="btn-primario" onclick="aprovarProduto()">
            <i class="fas fa-check"></i> Aprovar
          </button>
          <button type="button" class="btn-perigo" onclick="mostrarCampoRejeicao()">
            <i class="fas fa-times"></i> Rejeitar
          </button>
          <button type="button" class="btn-secundario" onclick="fecharModal('modal-aprovar-produto')">
            Cancelar
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- MODAL CRIAR ENTREGA -->
  <div id="modal-criar-entrega" class="modal">
    <div class="modal-content">
      <span class="modal-fechar" onclick="fecharModal('modal-criar-entrega')">&times;</span>
      <h2>Criar Nova Entrega</h2>
      
      <form id="form-criar-entrega">
        <div class="form-grupo">
          <label>Pedido *</label>
          <select id="entrega-pedido" required onchange="carregarDadosPedido()">
            <option value="">Selecione um pedido</option>
          </select>
          <small>Pedidos confirmados sem entrega atribu√≠da</small>
        </div>

        <div id="dados-pedido-entrega" style="display: none; margin: 15px 0; padding: 15px; background: rgba(192,192,192,0.1); border-radius: 8px;">
          <h4>Dados do Pedido:</h4>
          <p><strong>Cliente:</strong> <span id="pedido-cliente"></span></p>
          <p><strong>Endere√ßo:</strong> <span id="pedido-endereco"></span></p>
          <p><strong>Telefone:</strong> <span id="pedido-telefone"></span></p>
          <p><strong>Valor:</strong> <span id="pedido-valor"></span> AKZ</p>
        </div>

        <div class="form-grupo">
          <label>Entregador *</label>
          <select id="entrega-entregador" required>
            <option value="">Selecione um entregador</option>
          </select>
        </div>

        <div class="form-grupo">
          <label>Comiss√£o do Entregador (AKZ) *</label>
          <input type="number" id="entrega-comissao" required min="0" step="0.01" value="500">
        </div>

        <div class="form-grupo">
          <label>Observa√ß√µes</label>
          <textarea id="entrega-observacoes" rows="3" placeholder="Instru√ß√µes especiais para o entregador..."></textarea>
        </div>

        <div style="display: flex; gap: 10px;">
          <button type="submit" class="btn-primario">
            <i class="fas fa-truck"></i> Criar e Atribuir Entrega
          </button>
          <button type="button" class="btn-secundario" onclick="fecharModal('modal-criar-entrega')">
            Cancelar
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- MODAL APROVAR/REJEITAR ENTREGA -->
  <div id="modal-aprovar-entrega" class="modal">
    <div class="modal-content">
      <span class="modal-fechar" onclick="fecharModal('modal-aprovar-entrega')">&times;</span>
      <h2>Validar Entrega Conclu√≠da</h2>
      
      <div id="entrega-info-aprovacao" style="margin-bottom: 20px;">
        <!-- Info da entrega -->
      </div>

      <form id="form-aprovar-entrega">
        <input type="hidden" id="entrega-id-aprovacao">
        
        <div class="form-grupo" id="grupo-observacoes-aprovacao">
          <label>Observa√ß√µes da Aprova√ß√£o</label>
          <textarea id="observacoes-aprovacao" rows="3" placeholder="Observa√ß√µes sobre a aprova√ß√£o..."></textarea>
        </div>

        <div class="form-grupo" id="grupo-motivo-rejeicao-entrega" style="display: none;">
          <label>Motivo da Rejei√ß√£o *</label>
          <textarea id="motivo-rejeicao-entrega" rows="4" placeholder="Explique o motivo da rejei√ß√£o..."></textarea>
        </div>

        <div style="display: flex; gap: 10px;">
          <button type="button" class="btn-primario" onclick="aprovarEntrega()">
            <i class="fas fa-check"></i> Aprovar Entrega
          </button>
          <button type="button" class="btn-perigo" onclick="mostrarCampoRejeicaoEntrega()">
            <i class="fas fa-times"></i> Rejeitar Entrega
          </button>
          <button type="button" class="btn-secundario" onclick="fecharModal('modal-aprovar-entrega')">
            Cancelar
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- MODAL GERAR PAGAMENTO FORNECEDOR -->
  <div id="modal-gerar-pagamento-fornecedor" class="modal">
    <div class="modal-content">
      <span class="modal-fechar" onclick="fecharModal('modal-gerar-pagamento-fornecedor')">&times;</span>
      <h2>Gerar Pagamentos - Fornecedores</h2>
      
      <form id="form-gerar-pagamento-fornecedor">
        <div class="form-grupo">
          <label>Fornecedor *</label>
          <select id="pagamento-fornecedor" required>
            <option value="">Selecione um fornecedor</option>
            <option value="todos">Todos os fornecedores</option>
          </select>
        </div>

        <div class="form-grid">
          <div class="form-grupo">
            <label>Data In√≠cio *</label>
            <input type="date" id="pagamento-fornecedor-inicio" required>
          </div>

          <div class="form-grupo">
            <label>Data Fim *</label>
            <input type="date" id="pagamento-fornecedor-fim" required>
          </div>
        </div>

        <div class="alert-info" style="margin: 15px 0; padding: 15px; background: rgba(255, 215, 0, 0.1); border-left: 4px solid #ffd700; border-radius: 8px;">
          <i class="fas fa-info-circle"></i> O sistema calcular√° automaticamente as vendas do per√≠odo e descontar√° a comiss√£o da plataforma.
        </div>

        <div style="display: flex; gap: 10px;">
          <button type="submit" class="btn-primario">
            <i class="fas fa-calculator"></i> Gerar Pagamentos
          </button>
          <button type="button" class="btn-secundario" onclick="fecharModal('modal-gerar-pagamento-fornecedor')">
            Cancelar
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- MODAL GERAR PAGAMENTO ENTREGADOR -->
  <div id="modal-gerar-pagamento-entregador" class="modal">
    <div class="modal-content">
      <span class="modal-fechar" onclick="fecharModal('modal-gerar-pagamento-entregador')">&times;</span>
      <h2>Gerar Pagamentos - Entregadores</h2>
      
      <form id="form-gerar-pagamento-entregador">
        <div class="form-grupo">
          <label>Entregador *</label>
          <select id="pagamento-entregador" required>
            <option value="">Selecione um entregador</option>
            <option value="todos">Todos os entregadores</option>
          </select>
        </div>

        <div class="form-grid">
          <div class="form-grupo">
            <label>Data In√≠cio *</label>
            <input type="date" id="pagamento-entregador-inicio" required>
          </div>

          <div class="form-grupo">
            <label>Data Fim *</label>
            <input type="date" id="pagamento-entregador-fim" required>
          </div>
        </div>

        <div class="alert-info" style="margin: 15px 0; padding: 15px; background: rgba(255, 215, 0, 0.1); border-left: 4px solid #ffd700; border-radius: 8px;">
          <i class="fas fa-info-circle"></i> O sistema calcular√° automaticamente as comiss√µes de todas as entregas aprovadas no per√≠odo.
        </div>

        <div style="display: flex; gap: 10px;">
          <button type="submit" class="btn-primario">
            <i class="fas fa-calculator"></i> Gerar Pagamentos
          </button>
          <button type="button" class="btn-secundario" onclick="fecharModal('modal-gerar-pagamento-entregador')">
            Cancelar
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- MODAL PROCESSAR PAGAMENTO -->
  <div id="modal-processar-pagamento" class="modal">
    <div class="modal-content">
      <span class="modal-fechar" onclick="fecharModal('modal-processar-pagamento')">&times;</span>
      <h2>Processar Pagamento</h2>
      
      <div id="pagamento-info-processar" style="margin-bottom: 20px;">
        <!-- Info do pagamento -->
      </div>

      <form id="form-processar-pagamento">
        <input type="hidden" id="pagamento-id-processar">
        <input type="hidden" id="pagamento-tipo-processar">
        
        <div class="form-grupo">
          <label>M√©todo de Pagamento *</label>
          <select id="metodo-pagamento" required>
            <option value="">Selecione</option>
            <option value="transferencia">Transfer√™ncia Banc√°ria</option>
            <option value="pix">PIX</option>
            <option value="dinheiro">Dinheiro</option>
            <option value="multicaixa">Multicaixa Express</option>
          </select>
        </div>

        <div class="form-grupo">
          <label>Comprovante (URL ou Refer√™ncia)</label>
          <input type="text" id="comprovante-pagamento" placeholder="Link do comprovante ou n√∫mero de refer√™ncia">
        </div>

        <div class="form-grupo">
          <label>Observa√ß√µes</label>
          <textarea id="observacoes-pagamento" rows="3" placeholder="Observa√ß√µes sobre o pagamento..."></textarea>
        </div>

        <div style="display: flex; gap: 10px;">
          <button type="submit" class="btn-primario">
            <i class="fas fa-check"></i> Confirmar Pagamento
          </button>
          <button type="button" class="btn-secundario" onclick="fecharModal('modal-processar-pagamento')">
            Cancelar
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- MODAL DETALHES FORNECEDOR -->
  <div id="modal-detalhes-fornecedor" class="modal">
    <div class="modal-content">
      <span class="modal-fechar" onclick="fecharModal('modal-detalhes-fornecedor')">&times;</span>
      <h2>Detalhes do Fornecedor</h2>
      
      <div id="fornecedor-info-detalhes">
        <!-- Preenchido dinamicamente -->
      </div>

      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button class="btn-primario" onclick="editarComissaoFornecedor()">
          <i class="fas fa-percent"></i> Definir Comiss√£o
        </button>
        <button class="btn-secundario" onclick="verProdutosFornecedor()">
          <i class="fas fa-box"></i> Ver Produtos
        </button>
        <button class="btn-secundario" onclick="verVendasFornecedor()">
          <i class="fas fa-chart-line"></i> Ver Vendas
        </button>
        <button class="btn-secundario" onclick="fecharModal('modal-detalhes-fornecedor')">
          Fechar
        </button>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer style="margin-top: 60px;">
    <div class="social">
      <h3>Painel do Administrador - Universo da Prata</h3>
      <p>Gerencie todos os dados do seu neg√≥cio em um s√≥ lugar</p>
    </div>
    <p style="margin-top: 20px;">&copy; 2026 Universo da Prata. Todos os direitos reservados.</p>
  </footer>

  <!-- Scripts -->
  <script src="../scripts/menu.js"></script>
  <script src="firebase-init.js"></script>
  <script src="admin.js"></script>
  <script src="admin-backend.js"></script>
  
  <!-- Scripts dos Cards -->
  <script src="cards/cards-init.js"></script>
  <script src="cards/produtos/produtos.js"></script>
  <script src="cards/entregadores/entregadores.js"></script>
  <script src="cards/pedidos/pedidos.js"></script>
  <script src="cards/clientes/clientes.js"></script>
  <script src="cards/vendas/vendas.js"></script>
  <script src="cards/avaliacoes/avaliacoes.js"></script>
</body>
</html>
