<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Subcategorias</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

      <!-- EspaÃ§o para o menu -->
  <div style="height: 50px;"></div>

  <!-- BotÃ£o Voltar -->
<button onclick="voltarPorHistorico()" class="botao-voltar">â† Voltar</button>

  <!-- Menu fixo no topo -->
  <header class="topo-fixo" id="menu-fixo">
    <div class="menu-container">
      <div class="logo-titulo">
        <a href="index.html">
          <img src="logo.png" alt="Logo" class="logo-site" />
        </a>
        <div class="titulos">
          <h1>UNIVERSO DA PRATA</h1>
          <h2 class="submarca">Joel Pratarias</h2>
        </div>
      </div>

      <!-- BotÃ£o hambÃºrguer -->
      <button class="menu-hamburguer" onclick="toggleMenu()">â˜°</button>

      <!-- Menu de navegaÃ§Ã£o -->
      <nav class="menu-navegacao mobile-escondido">
        <a href="index.html">ğŸ InÃ­cio</a>
        <a href="categorias.html">Categorias</a>
        <a href="#promocoes">PromoÃ§Ãµes</a>
        <a href="#sobre">â„¹ï¸Sobre NÃ³s</a>
        <a href="#contato">ğŸ“Contato</a>
        <a href="#buscar">ğŸ”Buscar</a>
        <a href="#carrinho">ğŸ›’Carrinho</a>
      </nav>
    </div>
  </header>
  <!-- Estrelas -->
  <div class="stars" id="stars-container"></div>


  <!-- Subcategorias -->
  <section class="subcategorias" id="subcategorias">
    <h2 id="subcategoria-titulo">Subcategorias</h2>
    <div class="grid" id="subcategorias-container">
      <!-- Populado via JS -->
    </div>
    <button class="voltar" onclick="voltarPorHistorico()">â† Voltar</button>
  </section>

  <script>
    // Recuperar a categoria da URL
    function obterCategoriaDaUrl() {
      const params = new URLSearchParams(window.location.search);
      return params.get("categoria");
    }

    function carregarSubcategorias() {
      const categoria = obterCategoriaDaUrl();
      if (!categoria) {
        window.location.href = "categorias.html";
        return;
      }

      document.getElementById("subcategoria-titulo").innerText = `PeÃ§as para: ${categoria}`;
      const container = document.getElementById("subcategorias-container");
      container.innerHTML = "";

      const opcoes = ['Homens', 'Mulheres'];
      if (categoria !== "Piercings") {
        opcoes.push('Casais', 'CrianÃ§as');
      }

      opcoes.forEach(opcao => {
        const div = document.createElement("div");
        div.className = "subcard";
        div.innerText = opcao;
        div.onclick = () => abrirProdutos(categoria, opcao);
        container.appendChild(div);
      });
    }

    function abrirProdutos(categoria, publico) {
      const id = `${categoria}-${publico}`;
      localStorage.setItem("produtoSelecionado", id);
      localStorage.setItem("etapaAnterior", JSON.stringify({
        origem: "subcategorias",
        categoria: categoria,
        publico: publico
      }));

      registrarNavegacao("subcategorias.html");
      window.location.href = "produto.html";
    }

    // HistÃ³rico personalizado
    function registrarNavegacao(pagina) {
      let historico = JSON.parse(localStorage.getItem("historicoNavegacao")) || [];
      historico.push(pagina);
      localStorage.setItem("historicoNavegacao", JSON.stringify(historico));
    }

    function voltarPorHistorico() {
      let historico = JSON.parse(localStorage.getItem("historicoNavegacao")) || [];
      historico.pop(); // tira a pÃ¡gina atual
      if (historico.length > 0) {
        const anterior = historico.pop();
        localStorage.setItem("historicoNavegacao", JSON.stringify(historico));
        window.location.href = anterior;
      } else {
        window.location.href = "index.html";
      }
    }

    // InicializaÃ§Ã£o
    window.addEventListener("load", () => {
      registrarNavegacao("subcategorias.html");
      carregarSubcategorias();
    });
  </script>

  <!-- Estrelas JS -->
  <script>
    const starsContainer = document.getElementById("stars-container");
    for (let i = 0; i < 100; i++) {
      const star = document.createElement("div");
      star.className = "star";
      star.style.left = `${Math.random() * 100}%`;
      star.style.top = `${Math.random() * 100}%`;
      star.style.animationDuration = `${5 + Math.random() * 10}s`;
      star.style.opacity = Math.random();
      starsContainer.appendChild(star);
    }
  </script>

 <script>
  function toggleMenu() {
    const menu = document.querySelector(".menu-navegacao");
    menu.classList.toggle("show");
  }
</script>

<!-- Menu toggle e ajuste -->
  <script>
    function toggleMenu() {
      const menu = document.querySelector('.menu-navegacao');
      menu.classList.toggle('mobile-escondido');
      menu.classList.toggle('mobile-visivel');
    }

    function ajustarMenuParaTamanhoTela() {
      const menu = document.querySelector('.menu-navegacao');
      if (window.innerWidth > 768) {
        menu.classList.remove('mobile-escondido', 'mobile-visivel');
      } else {
        menu.classList.add('mobile-escondido');
      }
    }

    window.addEventListener('load', ajustarMenuParaTamanhoTela);
    window.addEventListener('resize', ajustarMenuParaTamanhoTela);
  </script>


</body>
</html>
